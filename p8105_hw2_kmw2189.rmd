---
title: "Homework 2"
author: "Kylie Wheelock Riley"
date: "9/25/2019"
output: github_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

# Problem 1

## Importing and cleaning Mr. Trash Wheel Data
```{r trash wheel import}
library(readxl)
trash_wheel = read_excel(path = "./data/mr_trash_wheel_data.xlsx", 1) %>%
  janitor::clean_names() %>% 
  rename(vol_y3 = volume_cubic_yards, cigs = cigarette_butts) %>% 
  select(-x15) %>% 
  drop_na(dumpster:date) %>%
  mutate(sports_balls = round(sports_balls, 0)) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

## Importing and cleaning 2017 precipitation data
```{r cleaning 2017 precipitation}
precip_2017 = read_excel(path = "./data/mr_trash_wheel_data.xlsx", 4, skip = 1) %>% 
  janitor::clean_names() %>% 
  rename(total_in = total) %>% 
    mutate(
    total_in = na_if(total_in, 0),
    year = "2017") %>% 
  drop_na(total_in, month) %>% 
  select(year, month, total_in)
```

## Importing and cleaning 2018 precipitation data
```{r cleaning 2018 precipitation}
precip_2018 = read_excel(path = "./data/mr_trash_wheel_data.xlsx", 3, skip = 1) %>% 
  janitor::clean_names() %>% 
  rename(total_in = total) %>% 
  mutate(
    total_in = na_if(total_in, 0),
    year = "2018") %>% 
   drop_na(total_in, month) %>% 
  select(year, month, total_in)
```


## Joining 2017 and 2018 precipitation data
```{r binding 2017 & 2018 precip data}
precip_bind = bind_rows(precip_2017, precip_2018) %>% 
  mutate(month = month.name[month])
    

```

```{r data summary work, include = FALSE}
mean_trash_wheel = mean(pull(trash_wheel, weight_tons))
mean_cubic_yars = mean(pull(trash_wheel, vol_y3))
total_precip_17 = sum(pull(precip_2017, total_in))
total_precip_18 = sum(pull(precip_2018, total_in))
median_balls_17 = median(pull(trash_wheel, sports_balls), year = 2017)
median_balls_18 = median(pull(trash_wheel, sports_balls), year = 2018)
avg_balls_total = mean(pull(trash_wheel, sports_balls))
```

Mr. Trash Wheel is a trash interceptor that removes trash as it enters Baltimore's Inner Harbor. Between May 2014 and July 2018 Mr.Trash Wheel brought in a  total of `r nrow(trash_wheel)` dumpsters full of trash. The average dumpster weighed  `r round(mean_trash_wheel, digits = 2)` tons with a volume of `r round(mean_cubic_yars, digits = 2)` cubic yards. Trash collected in the dumpsters included cigarette butts, plastic bottles, sports balls, and grocery bags, among others. Mr. Trash Wheel is most active just after a precipitation event.  Between 2017 and 2018 there was a total of `r nrow(precip_bind)` months with precipitation. 2017 had higher total precipitation with  `r round(total_precip_17, digits = 2)` inches and 2018 had a total of  `r round(total_precip_18, digits = 2)` inches. The median number of sports balls collected per dumpster in 2017 was `r median_balls_17` and the 2018 median was also `r median_balls_18`.


# Problem 2


```{r importing and cleaning pols_month data}
pols_month = read_csv(file = "./data/pols_month.csv") %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
   mutate(
    month = as.numeric(month),
    month = month.name[month],
    ##using an if else statement with prez_gop variable to create new president variable 
    president = ifelse(prez_gop > 0, "gop", "dem")
    ) %>%
  select(-prez_dem, -prez_gop, -day)
```


```{r importing and cleaning snp data}
snp_data = read_csv(file = "./data/snp.csv") %>% 
  ##saving data as year, month, day, but it is written as month, day, year
  mutate( 
    date = as.Date(date)
    )
  ##separate(date, into = c("month", "day", "year"), sep = "/") 

```


Second, clean the data in snp.csv using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.










Third, tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.

Join the datasets by merging snp into pols, and merging unemployment into the result.

Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).

